# Informative: Example #2 of a caller workflow calling a reusable workflow located in a different repo (Gets the team members of a given team)
# Basically you leverage the reusable workflow's code, more or less. The code gets called within the context of the caller workflow's repo
# In this case, we give a team_slug and a token in order to make an API call and use the results of that call to print individual usernames for a team.   


name: Example Caller Workflow 2 (Get users from a team)

on:

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:
    inputs:
        team_slug: 
            description: "Team name"
            required: false
            type: choice
            options:
              - team-mario
              - team-luigi
              - team-peach
              - team-toad
env:
  # This token gets passed to the reusable workflow. It has org:read access, needed for the API call in the reusable workflow
  TEAMS_READ_TOKEN: ${{ secrets.TEAMS_READ_ACCESS }}

jobs:
  # Call reusable-workflow-2-teams from mcummings128/reusable-workflow-github-actions repo.
  call-reusable-workflow-2:
    name: Call mcummings128/reusable-workflow-2... workflow
    uses: mcummings128/reusable-workflow-github-actions/.github/workflows/reusable-workflow-2-teams.yml@866d3d1e0b62e48501f033a46b98743d32ebf03d
    secrets:
        teams_read_token: ${{ secrets.TEAMS_READ_ACCESS }}
    with: 
        team_name: "${{ inputs.team_slug }}"